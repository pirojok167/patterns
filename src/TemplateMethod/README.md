# Шаблонный метод

### Назначение
Предоставляет единый алгоритм для классов, позволяя переопределять шаги алгоритма в дочерних классах.

### Пример
Мы хотим заварить кофе и чай. Алгоритм приготовления у них условно идентичный:
нагреть воду, заварить напиток, налить в кружку, добавить сахар.
Большинство этапов, таких как кипячение воды или добавление сахара, у напитков одинаковые. А вот методы заваривания разные:
чай заваривается в чайнике, а кофе готовится путем пропускания горячей воды через фильтр.
Нам необходимо использовать единый алгоритм для обоих напитков. Как это сделать?

### Решение
Давайте создадим общий абстрактный класс [HotBeverage](HotBeverage.java),
в метод которого `prepareRecipe()` добавим алгоритм приготовления напитка,
а так же реализуем его шаги.
Метод `brew` делаем абстрактным, так как напитки завариваются по-разному.

Далее создаём дочерние классы [Tea](Tea.java) и [Coffee](Coffee.java),
в которых реализуем метод `brew`, с подходящим для данного напитка способом заваривания.  

Таким образом мы создали общий алгоритм для напитков,
и позволили его дочерним классам переопределять некоторые шаги.
Метод `prepareRecipe()` абстрактного класса [HotBeverage](HotBeverage.java) и есть *шаблонный метод*.

Так же мы можем использовать так называемые `перехватчики`.
Это методы, уже имеющие реализацию в абстрактном классе, но которые можно переопределить в дочерних классах.
В нашем примере с напитками это метод `personWantsSugar()`.
В базовой реализации он возвращает `false`, т.к. по умолчанию в напитки сахар не добавляется.
Но для [кофе](Coffee.java) мы этот метод переопределили, поскольку кофе без сахара просто отвратителен.

### Принцип
Главный принцип, который соблюдает этот паттерн в том,
что слой низкого уровня не обращается к абстракции высокого уровня.
То есть дочерние классы не обращаются к методам родительского класса,
а наоборот - методы подклассов вызываются абстрактным классов в методе-алгоритме `prepareRecipe()`.

В простонародье этот принцип называется `принцип голливуда - не звоните нам, мы вам сами позвоним`.